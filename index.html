<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ROLEXFLIP</title>
  <link rel="icon" type="image/png" href="favicon/favicon.png">
  <link rel="apple-touch-icon" href="favicon/favicon.png">
  <link rel="stylesheet" href="style.css?v=17">
</head>
<body>
  <!-- 헤더 -->
  <header class="header">
    <div class="header-inner">
      <div class="logo">
        <h1 id="header-logo-text">ROLEXFLIP</h1>
        <a href="#" id="header-manager-link" class="header-manager-link" style="display: none;">
          <span id="header-manager-name"></span>
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>
          </svg>
        </a>
        <span class="tagline">프리미엄 시계 인사이트</span>
      </div>
      <div class="header-stats">
        <div class="stat-item">
          <span class="stat-value" id="total-count">0</span>
          <span class="stat-label">전체 제품</span>
        </div>
        <div class="stat-item buy">
          <span class="stat-value" id="count-buy">0</span>
          <span class="stat-label">매입</span>
        </div>
        <div class="stat-item pending">
          <span class="stat-value" id="count-pending">0</span>
          <span class="stat-label">컨펌</span>
        </div>
        <div class="stat-item no">
          <span class="stat-value" id="count-no">0</span>
          <span class="stat-label">불가</span>
        </div>
      </div>
      <div class="user-area">
        <div id="login-btn-container">
          <button class="login-btn" id="login-btn">로그인</button>
        </div>
        <div id="user-info-container" class="user-dropdown-wrapper" style="display:none;">
          <button class="user-profile-btn" id="user-profile-btn">
            <img id="user-avatar" class="user-avatar" src="" alt="프로필">
            <span id="user-name" class="user-name"></span>
            <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M6 9l6 6 6-6"/>
            </svg>
          </button>
          <div class="user-dropdown" id="user-dropdown">
            <div class="dropdown-user-info">
              <img id="dropdown-avatar" class="dropdown-avatar" src="" alt="">
              <div class="dropdown-user-details">
                <span id="dropdown-name" class="dropdown-name"></span>
                <span id="dropdown-email" class="dropdown-email"></span>
              </div>
            </div>
            <div class="dropdown-divider"></div>
            <button class="dropdown-item" id="dropdown-my-info">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
              </svg>
              내 정보
            </button>
            <button class="dropdown-item" id="dropdown-invite-code" style="display: none;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M16 21v-2a4 4 0 00-4-4H6a4 4 0 00-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M22 21v-2a4 4 0 00-3-3.87"/>
                <path d="M16 3.13a4 4 0 010 7.75"/>
              </svg>
              초대코드
            </button>
            <!-- 담당자 문의 버튼 (딜러/일반회원/소속매니저만) -->
            <button class="dropdown-item" id="dropdown-contact-manager" style="display: none;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
              </svg>
              담당자 문의
            </button>
            <div class="dropdown-divider"></div>
            <button class="dropdown-item logout" id="logout-btn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/>
                <polyline points="16,17 21,12 16,7"/>
                <line x1="21" y1="12" x2="9" y2="12"/>
              </svg>
              로그아웃
            </button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- 메인 네비게이션 -->
  <nav class="main-nav">
    <div class="main-nav-inner">
      <button class="main-nav-tab active" data-tab="main" id="nav-main">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
          <polyline points="9 22 9 12 15 12 15 22"/>
        </svg>
        <span>메인</span>
      </button>
      <button class="main-nav-tab" data-tab="test" id="nav-test">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 11l3 3L22 4"/>
          <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/>
        </svg>
        <span>테스트</span>
      </button>
      <button class="main-nav-tab" data-tab="calc" id="nav-calc" onclick="switchTab('calc')">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="4" y="2" width="16" height="20" rx="2"/>
          <line x1="8" y1="6" x2="16" y2="6"/>
          <line x1="8" y1="10" x2="10" y2="10"/>
          <line x1="14" y1="10" x2="16" y2="10"/>
          <line x1="8" y1="14" x2="10" y2="14"/>
          <line x1="14" y1="14" x2="16" y2="14"/>
          <line x1="8" y1="18" x2="16" y2="18"/>
        </svg>
        <span>계산기</span>
      </button>
      <button class="main-nav-tab" data-tab="history" id="nav-history" style="display:none;">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        <span>히스토리</span>
      </button>
      <button class="main-nav-tab" data-tab="report" id="nav-report" style="display:none;">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
          <polyline points="17 8 12 3 7 8"/>
          <line x1="12" y1="3" x2="12" y2="15"/>
        </svg>
        <span>리포트</span>
      </button>
      <button class="main-nav-tab" data-tab="guide" id="nav-guide">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"/>
          <path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"/>
        </svg>
        <span>학습</span>
      </button>
      <button class="main-nav-tab admin-only" data-tab="admin" id="nav-admin" style="display:none;">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
          <circle cx="9" cy="7" r="4"/>
          <path d="M23 21v-2a4 4 0 00-3-3.87"/>
          <path d="M16 3.13a4 4 0 010 7.75"/>
        </svg>
        <span>관리자</span>
      </button>
    </div>
  </nav>

  <!-- 콘텐츠 영역 래퍼 -->
  <div class="content-wrapper" id="content-wrapper">

  <!-- 라인 탭 필터 (메인 탭에서만 표시) -->
  <nav class="line-tabs-wrapper" id="line-tabs-wrapper">
    <div class="line-tabs-grid">
      <!-- 전체 버튼: 두 줄에 걸쳐서 표시 -->
      <button class="line-tab line-tab-all active" data-line="" id="line-tab-all">
        <span class="tab-name">전체</span>
        <span class="tab-count" id="tab-count-all">0</span>
      </button>
      <!-- 프로페셔널 라인 -->
      <div class="line-tabs-row">
        <button class="line-tab line-category-btn" data-category="professional" id="category-professional">
          <span class="tab-name">프로페셔널</span>
        </button>
        <div class="line-tabs-items" id="line-tabs-professional"></div>
      </div>
      <!-- 클래식 라인 -->
      <div class="line-tabs-row">
        <button class="line-tab line-category-btn" data-category="classic" id="category-classic">
          <span class="tab-name">클래식</span>
        </button>
        <div class="line-tabs-items" id="line-tabs-classic"></div>
      </div>
    </div>
  </nav>

  <!-- 시각화 섹션 -->
  <section class="visualization-section" id="visualization-section">
    <div class="viz-container">
      <div class="viz-card wide">
        <h3>속성별 매입률</h3>
        <div class="chart-container" id="line-chart"></div>
      </div>
      <div class="viz-card">
        <h3>매입 상태 현황</h3>
        <div class="chart-container" id="status-chart"></div>
      </div>
      <div class="viz-card">
        <h3>가격대별 분포</h3>
        <div class="chart-container" id="price-chart"></div>
      </div>
    </div>
    <button class="viz-toggle" id="viz-toggle">
      <span id="viz-toggle-text">차트 숨기기</span>
      <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
        <path d="M2 4L6 8L10 4" stroke="currentColor" stroke-width="2" fill="none"/>
      </svg>
    </button>
  </section>

  <!-- 테스트 모드 섹션 -->
  <section class="test-section" id="test-section" style="display:none;">
    <div class="test-container">
      <!-- 테스트 유형 선택 화면 -->
      <div class="test-type-select" id="test-type-select">
        <h2>테스트 선택</h2>
        <p>원하는 테스트 유형을 선택하세요.</p>
        <div class="test-type-buttons">
          <button class="test-type-btn" data-type="purchase">
            <span class="test-type-icon">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2"/>
                <rect x="9" y="3" width="6" height="4" rx="1"/>
                <path d="M9 12l2 2 4-4"/>
              </svg>
            </span>
            <span class="test-type-name">매입 판단 테스트</span>
            <span class="test-type-desc">시계를 보고 매입/컨펌/불가 판단</span>
          </button>
          <button class="test-type-btn" data-type="spec">
            <span class="test-type-icon">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="11" r="6"/>
                <path d="M21 21l-4.35-4.35"/>
                <path d="M11 8v6M8 11h6"/>
              </svg>
            </span>
            <span class="test-type-name">스펙 맞추기 테스트</span>
            <span class="test-type-desc">소재, 베젤, 브레이슬릿 맞추기</span>
          </button>
        </div>
      </div>

      <!-- 테스트 시작 화면 -->
      <div class="test-start" id="test-start" style="display:none;">
        <h2 id="test-start-title">매입 판단 테스트</h2>
        <p id="test-start-desc">10개의 시계에 대한 매입 판단을 테스트합니다.</p>
        <div class="test-options" id="test-options">
          <label class="test-option">
            <input type="radio" name="test-line" value="" checked>
            <span>전체 라인</span>
          </label>
        </div>
        <button class="start-test-btn" id="start-test-btn">테스트 시작</button>
      </div>

      <!-- 테스트 진행 화면 -->
      <div class="test-progress" id="test-progress" style="display:none;">
        <div class="test-header">
          <span class="test-count">문제 <span id="current-q">1</span>/10</span>
          <div class="test-progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
          </div>
        </div>

        <div class="test-card" id="test-card">
          <div class="test-image-wrapper">
            <img id="test-image" src="" alt="테스트 시계">
          </div>
          <div class="test-info">
            <div class="test-line" id="test-line-name"></div>
            <div class="test-title" id="test-title"></div>
            <div class="test-model" id="test-model"></div>
            <div class="test-price" id="test-price"></div>
            <div class="test-material" id="test-material"></div>
          </div>
        </div>

        <!-- 매입 판단 테스트 선택지 -->
        <div class="test-choices" id="purchase-choices">
          <button class="choice-btn buy" data-choice="buy">
            <span class="choice-icon">O</span>
            <span>매입</span>
          </button>
          <button class="choice-btn pending" data-choice="pending">
            <span class="choice-icon">△</span>
            <span>컨펌</span>
          </button>
          <button class="choice-btn no" data-choice="no">
            <span class="choice-icon">X</span>
            <span>불가</span>
          </button>
        </div>

        <!-- 스펙 맞추기 테스트 선택지 -->
        <div class="spec-test-area" id="spec-test-area" style="display:none;">
          <div class="spec-question-type" id="spec-question-type">소재를 맞춰보세요</div>
          <div class="spec-choices" id="spec-choices">
            <!-- 4개 버튼이 동적으로 생성됨 -->
          </div>
        </div>
      </div>

      <!-- 테스트 결과 화면 -->
      <div class="test-result" id="test-result" style="display:none;">
        <h2 id="result-title">테스트 결과</h2>
        <div class="result-score">
          <span class="score-value" id="score-value">0</span>
          <span class="score-total" id="score-total">/10</span>
        </div>
        <div class="result-grade" id="result-grade">우수</div>

        <div class="result-details" id="result-details">
        </div>

        <div class="result-actions">
          <button class="retry-btn" id="retry-btn">다시 테스트</button>
          <button class="view-stats-btn" id="view-stats-btn">통계 보기</button>
        </div>
      </div>
    </div>
  </section>

  <!-- 통계 섹션 -->
  <section class="stats-section" id="stats-section" style="display:none;">
    <div class="stats-container">
      <div class="stats-header">
        <h2 class="stats-page-title">나의 테스트 통계</h2>
        <button class="stats-reset-btn" id="stats-reset-btn" title="통계 초기화">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
            <path d="M21 3v5h-5"/>
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
            <path d="M3 21v-5h5"/>
          </svg>
          <span>리셋</span>
        </button>
      </div>

      <div class="stats-summary" id="stats-page-summary">
        <div class="stats-card">
          <span class="stats-value" id="page-total-tests">0</span>
          <span class="stats-label">총 시도 횟수</span>
        </div>
        <div class="stats-card">
          <span class="stats-value" id="page-accuracy">0%</span>
          <span class="stats-label">전체 정답률</span>
        </div>
        <div class="stats-card">
          <span class="stats-value" id="page-avg-score">0</span>
          <span class="stats-label">평균 점수</span>
        </div>
      </div>

      <div class="stats-grid">
        <div class="stats-panel">
          <h3>라인별 정답률</h3>
          <div class="line-stats-chart" id="page-line-stats"></div>
        </div>

        <div class="stats-panel">
          <h3>자주 틀리는 모델</h3>
          <div class="wrong-models-list" id="page-wrong-models"></div>
        </div>
      </div>

      <div class="stats-panel full-width">
        <h3>최근 테스트 기록</h3>
        <div class="recent-tests-list" id="page-recent-tests"></div>
      </div>
    </div>
  </section>

  <!-- 계산기 섹션 -->
  <section class="calc-section" id="calc-section" style="display:none;">
    <div class="calc-container">
      <h2 class="calc-title">마진 계산기</h2>
      <p class="calc-subtitle">거래 조건을 입력하여 예상 이윤을 계산하세요.</p>

      <!-- 입력 영역 -->
      <div class="calc-input-panel">
        <div class="calc-input-group">
          <label for="calc-retail">리테일가 (시계 구매가)</label>
          <input type="text" id="calc-retail" placeholder="예: 19,710,000" inputmode="numeric">
        </div>
        <div class="calc-input-group">
          <label for="calc-gift-rate">상품권 요율 (%)</label>
          <input type="text" id="calc-gift-rate" placeholder="예: 3.2" inputmode="decimal">
        </div>
        <div class="calc-input-group">
          <label for="calc-point-rate">실적 판매 요율 (%)</label>
          <input type="text" id="calc-point-rate" placeholder="예: 3" inputmode="decimal">
        </div>
        <div class="calc-input-group">
          <label for="calc-sell">판매가 (시계 판매가)</label>
          <input type="text" id="calc-sell" placeholder="예: 20,400,000" inputmode="numeric">
        </div>
        <button class="calc-btn" onclick="calculateMargin()">계산하기</button>
      </div>
    </div>
  </section>

  <!-- 히스토리 섹션 -->
  <section class="history-section" id="history-section" style="display:none;">
    <div class="history-container">
      <h2 class="history-title">상태 변경 히스토리</h2>
      <p class="history-subtitle">매입 상태 변경 이력을 확인하세요.</p>

      <!-- 필터 영역 -->
      <div class="history-filter">
        <div class="history-filter-row">
          <div class="history-filter-group">
            <label>기간</label>
            <select id="history-date-filter">
              <option value="7">최근 7일</option>
              <option value="30" selected>최근 30일</option>
              <option value="90">최근 90일</option>
              <option value="all">전체</option>
            </select>
          </div>
          <div class="history-filter-group">
            <label>상태</label>
            <select id="history-status-filter">
              <option value="">전체</option>
              <option value="buy">매입</option>
              <option value="pending">컨펌</option>
              <option value="no">불가</option>
            </select>
          </div>
          <div class="history-filter-group search">
            <label>검색</label>
            <input type="text" id="history-search-input" placeholder="모델번호, 모델명 검색">
          </div>
          <!-- 모바일 필터 버튼 -->
          <button class="history-filter-btn" id="history-filter-btn" onclick="openHistoryFilterModal()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="4" y1="6" x2="20" y2="6"/>
              <line x1="4" y1="12" x2="20" y2="12"/>
              <line x1="4" y1="18" x2="20" y2="18"/>
              <circle cx="8" cy="6" r="2" fill="currentColor"/>
              <circle cx="16" cy="12" r="2" fill="currentColor"/>
              <circle cx="10" cy="18" r="2" fill="currentColor"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- 로그 목록 -->
      <div class="history-list" id="history-list">
        <div class="history-empty">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
          </svg>
          <p>변경 이력이 없습니다.</p>
        </div>
      </div>

      <!-- 더보기 버튼 -->
      <div class="history-load-more" id="history-load-more" style="display:none;">
        <button class="history-load-more-btn" onclick="loadMoreLogs()">더보기</button>
      </div>
    </div>
  </section>

  <!-- 히스토리 필터 모달 (모바일용) -->
  <div class="filter-modal" id="history-filter-modal">
    <div class="filter-modal-content">
      <div class="filter-modal-header">
        <h3>히스토리 필터</h3>
        <button class="filter-modal-close" onclick="closeHistoryFilterModal()">&times;</button>
      </div>
      <div class="filter-modal-body">
        <div class="filter-modal-section">
          <div class="filter-modal-section-title">기간</div>
          <select class="filter-modal-select" id="mobile-history-date-filter">
            <option value="7">최근 7일</option>
            <option value="30" selected>최근 30일</option>
            <option value="90">최근 90일</option>
            <option value="all">전체</option>
          </select>
        </div>
        <div class="filter-modal-section">
          <div class="filter-modal-section-title">상태</div>
          <select class="filter-modal-select" id="mobile-history-status-filter">
            <option value="">전체</option>
            <option value="buy">매입</option>
            <option value="pending">컨펌</option>
            <option value="no">불가</option>
          </select>
        </div>
      </div>
      <div class="filter-modal-footer">
        <button class="filter-reset-btn" onclick="resetHistoryFilter()">초기화</button>
        <button class="filter-apply-btn" onclick="applyHistoryFilter()">적용하기</button>
      </div>
    </div>
  </div>

  <!-- 팀 리포트 섹션 -->
  <section class="report-section" id="report-section" style="display:none;">
    <div class="report-container">
      <h2 class="report-title">팀 리포트</h2>
      <p class="report-subtitle">팀원들의 테스트 성과와 활동을 확인하세요.</p>

      <!-- 요약 카드 -->
      <div class="report-summary">
        <div class="report-summary-card">
          <div class="report-summary-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
              <circle cx="9" cy="7" r="4"/>
            </svg>
          </div>
          <div class="report-summary-info">
            <div class="report-summary-value" id="report-team-count">0</div>
            <div class="report-summary-label">팀원 수</div>
          </div>
        </div>
        <div class="report-summary-card">
          <div class="report-summary-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 11l3 3L22 4"/>
              <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"/>
            </svg>
          </div>
          <div class="report-summary-info">
            <div class="report-summary-value" id="report-total-tests">0</div>
            <div class="report-summary-label">총 테스트</div>
          </div>
        </div>
        <div class="report-summary-card">
          <div class="report-summary-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <path d="M12 6v6l4 2"/>
            </svg>
          </div>
          <div class="report-summary-info">
            <div class="report-summary-value" id="report-avg-score">0%</div>
            <div class="report-summary-label">평균 정답률</div>
          </div>
        </div>
      </div>

      <!-- 팀원 목록 -->
      <div class="report-section-title">
        <h3>팀원별 성과</h3>
        <button class="report-export-btn" onclick="exportReportCSV()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          CSV 내보내기
        </button>
      </div>

      <div class="report-team-list" id="report-team-list">
        <div class="report-loading">로딩 중...</div>
      </div>
    </div>
  </section>

  <!-- 학습/가이드 섹션 -->
  <section class="guide-section" id="guide-section" style="display:none;">
    <div class="guide-container">
      <h2 class="guide-title">학습 가이드</h2>
      <p class="guide-subtitle">시계 모델 학습과 플랫폼 활용에 필요한 정보를 확인하세요.</p>

      <!-- 가이드 카테고리 탭 -->
      <div class="guide-tabs">
        <button class="guide-tab active" data-guide-tab="platform">플랫폼 사용법</button>
        <button class="guide-tab" data-guide-tab="tips">학습 팁</button>
        <button class="guide-tab" data-guide-tab="faq">FAQ</button>
      </div>

      <!-- 플랫폼 사용법 -->
      <div class="guide-content active" id="guide-platform">
        <div class="guide-article">
          <h3>매입 상태 관리</h3>
          <div class="guide-steps">
            <div class="guide-step">
              <div class="guide-step-number">1</div>
              <div class="guide-step-content">
                <h4>시계 선택</h4>
                <p>메인 화면에서 상태를 변경할 시계를 찾아 클릭합니다. 상단 필터와 검색을 활용하면 빠르게 찾을 수 있습니다.</p>
              </div>
            </div>
            <div class="guide-step">
              <div class="guide-step-number">2</div>
              <div class="guide-step-content">
                <h4>상태 변경</h4>
                <p>시계 상세 화면에서 매입/컨펌/불가 버튼을 클릭하여 상태를 변경합니다. 변경 내역은 히스토리 탭에서 확인할 수 있습니다.</p>
              </div>
            </div>
            <div class="guide-step">
              <div class="guide-step-number">3</div>
              <div class="guide-step-content">
                <h4>필터로 확인</h4>
                <p>상단의 매입/컨펌/불가 필터 버튼을 클릭하면 해당 상태의 시계만 필터링하여 볼 수 있습니다.</p>
              </div>
            </div>
          </div>
        </div>
        <div class="guide-article">
          <h3>테스트 기능 활용</h3>
          <div class="guide-steps">
            <div class="guide-step">
              <div class="guide-step-number">1</div>
              <div class="guide-step-content">
                <h4>테스트 유형 선택</h4>
                <p>이미지 테스트(시계 이미지로 모델 맞추기) 또는 번호 테스트(모델 번호로 정보 맞추기)를 선택합니다.</p>
              </div>
            </div>
            <div class="guide-step">
              <div class="guide-step-number">2</div>
              <div class="guide-step-content">
                <h4>라인 선택</h4>
                <p>학습하고 싶은 라인을 선택하거나, 전체 라인에서 무작위로 출제받을 수 있습니다.</p>
              </div>
            </div>
            <div class="guide-step">
              <div class="guide-step-number">3</div>
              <div class="guide-step-content">
                <h4>결과 확인</h4>
                <p>테스트 완료 후 정답률과 틀린 문제를 확인하고, 통계 탭에서 누적 성과를 분석할 수 있습니다.</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 학습 팁 -->
      <div class="guide-content" id="guide-tips">
        <div class="guide-tips-grid">
          <div class="guide-tip-card">
            <div class="guide-tip-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                <path d="M2 17l10 5 10-5"/>
                <path d="M2 12l10 5 10-5"/>
              </svg>
            </div>
            <h4>라인별 집중 학습</h4>
            <p>한 번에 모든 라인을 외우려 하지 말고, 하나의 라인을 완벽히 익힌 후 다음으로 넘어가세요. 서브마리너나 데이트저스트처럼 인기 라인부터 시작하는 것을 추천합니다.</p>
          </div>
          <div class="guide-tip-card">
            <div class="guide-tip-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M12 6v6l4 2"/>
              </svg>
            </div>
            <h4>매일 꾸준히</h4>
            <p>하루 10분이라도 매일 테스트를 진행하세요. 간헐적인 긴 학습보다 짧은 시간의 꾸준한 반복이 암기에 훨씬 효과적입니다.</p>
          </div>
          <div class="guide-tip-card">
            <div class="guide-tip-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </div>
            <h4>이미지 특징 파악</h4>
            <p>각 모델의 베젤 색상, 다이얼 패턴, 브레이슬릿 스타일 등 시각적 특징을 파악하세요. 이미지 테스트에서 큰 도움이 됩니다.</p>
          </div>
          <div class="guide-tip-card">
            <div class="guide-tip-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="16" y1="13" x2="8" y2="13"/>
                <line x1="16" y1="17" x2="8" y2="17"/>
              </svg>
            </div>
            <h4>모델번호 규칙 이해</h4>
            <p>롤렉스 모델번호는 규칙이 있습니다. 앞자리는 모델 종류, 뒷자리는 소재와 베젤을 나타내는 경우가 많으니 패턴을 파악해보세요.</p>
          </div>
          <div class="guide-tip-card">
            <div class="guide-tip-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
              </svg>
            </div>
            <h4>틀린 문제 복습</h4>
            <p>테스트 결과에서 틀린 문제들을 따로 메모해두고 반복 학습하세요. 약점을 집중 공략하면 빠르게 정답률을 높일 수 있습니다.</p>
          </div>
          <div class="guide-tip-card">
            <div class="guide-tip-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 00-3-3.87"/>
                <path d="M16 3.13a4 4 0 010 7.75"/>
              </svg>
            </div>
            <h4>동료와 함께</h4>
            <p>팀원들과 함께 학습하면 동기부여가 됩니다. 리포트 탭에서 팀 성과를 확인하고 선의의 경쟁을 통해 실력을 키워보세요.</p>
          </div>
        </div>
      </div>

      <!-- FAQ -->
      <div class="guide-content" id="guide-faq">
        <div class="guide-faq-list">
          <div class="guide-faq-item" onclick="toggleFaq(this)">
            <div class="guide-faq-question">
              <span>테스트 문제는 어떻게 출제되나요?</span>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
              </svg>
            </div>
            <div class="guide-faq-answer">
              <p>테스트 문제는 등록된 시계 데이터베이스에서 무작위로 출제됩니다. 이미지 테스트는 시계 이미지를 보고 모델명을 맞추는 방식이며, 번호 테스트는 모델 번호를 보고 해당 정보를 맞추는 방식입니다. 선택한 라인에 따라 해당 라인의 시계만 출제됩니다.</p>
            </div>
          </div>
          <div class="guide-faq-item" onclick="toggleFaq(this)">
            <div class="guide-faq-question">
              <span>매입 상태는 누가 변경할 수 있나요?</span>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
              </svg>
            </div>
            <div class="guide-faq-answer">
              <p>매입 상태 변경은 권한에 따라 다릅니다. 일반 멤버는 시계 정보를 조회만 할 수 있고, 딜러 이상의 권한을 가진 사용자가 상태를 변경할 수 있습니다. 변경된 내역은 모두 히스토리에 기록됩니다.</p>
            </div>
          </div>
          <div class="guide-faq-item" onclick="toggleFaq(this)">
            <div class="guide-faq-question">
              <span>통계는 어떻게 계산되나요?</span>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
              </svg>
            </div>
            <div class="guide-faq-answer">
              <p>통계 탭에서는 내가 진행한 모든 테스트의 결과를 분석합니다. 전체 정답률, 라인별 정답률, 최근 학습 추이 등을 확인할 수 있습니다. 데이터는 테스트를 완료할 때마다 자동으로 업데이트됩니다.</p>
            </div>
          </div>
          <div class="guide-faq-item" onclick="toggleFaq(this)">
            <div class="guide-faq-question">
              <span>데이터는 실시간으로 동기화되나요?</span>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9l6 6 6-6"/>
              </svg>
            </div>
            <div class="guide-faq-answer">
              <p>네, 모든 데이터는 Firebase를 통해 실시간으로 동기화됩니다. 다른 사용자가 매입 상태를 변경하면 자동으로 반영되며, 여러 기기에서 동시에 접속해도 항상 최신 데이터를 확인할 수 있습니다.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 관리자 섹션 -->
  <section class="admin-section" id="admin-section" style="display:none;">
    <div class="admin-container">
      <h2 class="admin-page-title">회원 관리</h2>

      <div class="admin-tabs">
        <button class="admin-tab active" data-admin-tab="myteam" id="admin-tab-myteam">
          내 회원
        </button>
        <button class="admin-tab" data-admin-tab="approved" id="admin-tab-approved">
          전체 회원
        </button>
        <button class="admin-tab" data-admin-tab="pending" id="admin-tab-pending">
          대기/취소
        </button>
        <button class="admin-tab" data-admin-tab="managers" id="admin-tab-managers" style="display:none;">
          채팅방설정
        </button>
      </div>

      <!-- 회원 필터 영역 (매니저 선택 + 검색) -->
      <div class="admin-filter-bar">
        <div class="admin-filter-left">
          <select id="admin-manager-filter" class="admin-filter-select">
            <option value="">전체 회원</option>
          </select>
        </div>
        <div class="admin-filter-right">
          <div class="admin-search-box">
            <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <path d="M21 21l-4.35-4.35"/>
            </svg>
            <input type="text" id="admin-search-input" placeholder="이름, 연락처, 이메일 검색">
          </div>
        </div>
      </div>

      <!-- 매입 데이터 소스 선택 (소유자 전용, 승인 완료 탭에서만 표시) -->
      <div class="data-source-selector" id="data-source-selector" style="display:none;">
        <span class="data-source-label">매입 데이터 소스:</span>
        <select id="data-source-select">
          <option value="">내 데이터</option>
        </select>
        <span class="data-source-hint">다른 매니저 선택 시 수정 불가</span>
      </div>

      <div class="admin-user-list" id="admin-user-list">
        <!-- 동적 생성 -->
      </div>

      <!-- 채팅방설정 섹션 (매니저/소유자) -->
      <div class="manager-management-section" id="manager-management-section" style="display:none;">
        <!-- 내 채팅방 설정 -->
        <div class="chat-settings-card" id="my-chat-settings">
          <h3 class="chat-settings-title">내 채팅방 설정</h3>
          <p class="chat-settings-desc">회원들이 연락할 수 있는 오픈채팅방 링크를 설정하세요.</p>

          <div class="chat-link-group">
            <label>공지방 링크</label>
            <input type="url" id="notice-chat-link" placeholder="https://open.kakao.com/...">
          </div>
          <div class="chat-link-group">
            <label>1:1 채팅방 링크</label>
            <input type="url" id="direct-chat-link" placeholder="https://open.kakao.com/...">
          </div>
          <button class="save-chat-links-btn" onclick="saveMyChatLinks()">저장</button>
        </div>

        <!-- 매니저 목록 (소유자만 - 기존 기능 유지) -->
        <div class="manager-list" id="manager-list">
          <!-- 동적 생성 -->
        </div>
      </div>
    </div>
  </section>

  <!-- 메인 컨텐츠 -->
  <div class="container" id="main-container">
    <!-- 필터 바 -->
    <div class="filter-bar">
      <div class="filter-left">
        <div class="status-chips">
          <label class="status-chip buy">
            <input type="checkbox" value="buy" checked>
            <span class="chip-dot"></span>
            <span class="chip-text">매입</span>
          </label>
          <label class="status-chip pending">
            <input type="checkbox" value="pending" checked>
            <span class="chip-dot"></span>
            <span class="chip-text">컨펌</span>
          </label>
          <label class="status-chip no">
            <input type="checkbox" value="no" checked>
            <span class="chip-dot"></span>
            <span class="chip-text">불가</span>
          </label>
          <div class="edit-mode-toggle" id="edit-mode-toggle" style="display:none;">
            <label class="toggle-switch">
              <input type="checkbox" id="edit-mode-checkbox" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>
      </div>
      <div class="filter-right">
        <div class="search-box">
          <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="M21 21l-4.35-4.35"/>
          </svg>
          <input type="text" id="search-input" placeholder="모델명, 모델번호 검색">
        </div>
        <button id="desktop-filter-btn" class="desktop-filter-btn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="4" y1="6" x2="20" y2="6"/>
            <line x1="8" y1="12" x2="16" y2="12"/>
            <line x1="11" y1="18" x2="13" y2="18"/>
          </svg>
          <span>필터</span>
        </button>
        <button id="reset-filters" class="reset-btn">초기화</button>
      </div>
    </div>

    <!-- 모바일 검색바 -->
    <div class="mobile-search-bar" id="mobile-search-bar">
      <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"/>
        <path d="M21 21l-4.35-4.35"/>
      </svg>
      <input type="text" id="mobile-main-search" placeholder="모델명, 가격 검색">
      <button class="mobile-filter-btn-inline" id="mobile-filter-btn">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="4" y1="6" x2="20" y2="6"/>
          <line x1="8" y1="12" x2="16" y2="12"/>
          <line x1="11" y1="18" x2="13" y2="18"/>
        </svg>
      </button>
    </div>

    <!-- 결과 헤더 -->
    <div class="results-header">
      <span class="results-count"><strong id="filtered-count">0</strong>개 제품</span>
      <span class="results-line" id="current-line-name">전체 라인</span>
    </div>

    <!-- 제품 그리드 -->
    <div id="product-grid" class="product-grid">
      <!-- 제품 카드들이 여기에 렌더링됨 -->
    </div>
    <div id="loading" class="loading">
      <div class="loading-spinner"></div>
      <span>로딩 중...</span>
    </div>
    <div id="no-results" class="no-results" style="display:none;">
      <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
        <circle cx="11" cy="11" r="8"/>
        <path d="M21 21l-4.35-4.35"/>
      </svg>
      <p>검색 결과가 없습니다.</p>
      <span>다른 조건으로 검색해보세요.</span>
    </div>

    <!-- 더보기 버튼 -->
    <div id="load-more-container" class="load-more-container" style="display:none;">
      <button id="load-more-btn" class="load-more-btn">
        더보기 (<span id="remaining-count">0</span>개 남음)
      </button>
    </div>
  </div>

  </div><!-- content-wrapper 끝 -->

  <!-- 로그인 모달 -->
  <div class="modal-overlay" id="login-modal">
    <div class="modal-content">
      <button class="modal-close" id="login-modal-close">&times;</button>
      <!-- 선택 화면 -->
      <div id="login-step-select">
        <h2 class="modal-title">시작하기</h2>
        <div class="login-options">
          <button class="google-login-btn" id="google-login-btn">
            <svg width="18" height="18" viewBox="0 0 24 24">
              <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
              <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
              <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
              <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
            </svg>
            <span>로그인</span>
          </button>
          <button class="google-signup-btn" id="google-signup-btn">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
              <circle cx="8.5" cy="7" r="4"/>
              <line x1="20" y1="8" x2="20" y2="14"/>
              <line x1="23" y1="11" x2="17" y2="11"/>
            </svg>
            <span>회원가입</span>
          </button>
        </div>
        <p class="login-hint">기존 회원은 로그인, 신규 회원은 회원가입을 선택하세요</p>
      </div>
      <!-- 초대코드 입력 화면 -->
      <div id="login-step-invite" style="display: none;">
        <h2 class="modal-title">초대코드 입력</h2>
        <p class="modal-subtitle">회원가입을 위해 초대코드를 입력해주세요</p>
        <div class="invite-code-form">
          <input type="text" id="signup-invite-code" class="invite-code-input" placeholder="6자리 초대코드" maxlength="6">
          <p class="form-hint">매니저에게 받은 초대코드가 필요합니다</p>
          <div class="invite-code-actions">
            <button type="button" class="invite-back-btn" id="invite-back-btn">뒤로</button>
            <button type="button" class="invite-next-btn" id="invite-next-btn">다음</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 프로필 입력 모달 (첫 로그인 시) -->
  <div class="modal-overlay" id="profile-modal">
    <div class="modal-content">
      <h2 class="modal-title">회원 정보 입력</h2>
      <p class="modal-subtitle">서비스 이용을 위해 정보를 입력해주세요.</p>
      <form id="profile-form" class="profile-form">
        <div class="form-group">
          <label for="profile-invite-code">초대코드</label>
          <input type="text" id="profile-invite-code" disabled class="invite-code-display">
          <span class="form-hint" id="profile-invite-manager"></span>
        </div>
        <div class="form-group">
          <label for="profile-name">이름 *</label>
          <input type="text" id="profile-name" required placeholder="실명을 입력하세요">
        </div>
        <div class="form-group">
          <label for="profile-nickname">닉네임/업체명 *</label>
          <input type="text" id="profile-nickname" required placeholder="표시될 이름 (업체명 가능)">
          <span class="form-hint">다른 사용자에게 보여질 이름입니다</span>
        </div>
        <div class="form-group">
          <label for="profile-phone">연락처 *</label>
          <input type="tel" id="profile-phone" required placeholder="010-0000-0000">
        </div>
        <div class="form-group terms-agree-group">
          <label class="checkbox-label">
            <input type="checkbox" id="profile-terms-agree" required>
            <span class="checkbox-custom"></span>
            <span class="checkbox-text">
              <a href="terms.html" target="_blank" class="terms-link">이용약관</a> 및
              <a href="privacy.html" target="_blank" class="terms-link">개인정보취급방침</a>에 동의합니다. *
            </span>
          </label>
          <span class="form-hint">리셀 관련 주의사항을 포함한 약관에 동의해주세요.</span>
        </div>
        <button type="submit" class="submit-profile-btn">가입 완료</button>
      </form>
    </div>
  </div>

  <!-- 내 정보 모달 -->
  <div class="modal-overlay" id="my-info-modal">
    <div class="modal-content">
      <button class="modal-close" id="my-info-modal-close">&times;</button>
      <h2 class="modal-title">내 정보</h2>
      <div class="my-info-content">
        <div class="my-info-avatar-section">
          <img id="my-info-avatar" class="my-info-avatar" src="" alt="프로필">
          <div class="my-info-name" id="my-info-name"></div>
          <div class="my-info-email" id="my-info-email"></div>
        </div>
        <div class="my-info-details">
          <!-- 등급 표시 -->
          <div class="my-info-role">
            <span class="my-info-label">등급</span>
            <span class="my-info-role-badge" id="my-info-role">-</span>
          </div>
          <!-- 수정 가능 필드 (보기 모드) -->
          <div class="my-info-editable" id="my-info-view-mode">
            <div class="my-info-item">
              <span class="my-info-label">이름</span>
              <span class="my-info-value" id="my-info-realname">-</span>
            </div>
            <div class="my-info-item">
              <span class="my-info-label">닉네임</span>
              <span class="my-info-value" id="my-info-nickname">-</span>
            </div>
            <div class="my-info-item">
              <span class="my-info-label">연락처</span>
              <span class="my-info-value" id="my-info-phone">-</span>
            </div>
            <button type="button" class="my-info-edit-btn" id="my-info-edit-btn">정보 수정</button>
          </div>
          <!-- 수정 모드 -->
          <div class="my-info-editable" id="my-info-edit-mode" style="display: none;">
            <div class="my-info-edit-item">
              <label class="my-info-label">이름</label>
              <input type="text" id="my-info-edit-name" class="my-info-edit-input" placeholder="이름">
            </div>
            <div class="my-info-edit-item">
              <label class="my-info-label">닉네임</label>
              <input type="text" id="my-info-edit-nickname" class="my-info-edit-input" placeholder="닉네임/업체명">
            </div>
            <div class="my-info-edit-item">
              <label class="my-info-label">연락처</label>
              <input type="tel" id="my-info-edit-phone" class="my-info-edit-input" placeholder="010-0000-0000">
            </div>
            <div class="my-info-edit-actions">
              <button type="button" class="my-info-cancel-btn" id="my-info-cancel-btn">취소</button>
              <button type="button" class="my-info-save-btn" id="my-info-save-btn">저장</button>
            </div>
          </div>
          <!-- 가입일/활동기간 (2열 그리드) -->
          <div class="my-info-dates">
            <div class="my-info-item">
              <span class="my-info-label">가입일</span>
              <span class="my-info-value" id="my-info-joindate">-</span>
            </div>
            <div class="my-info-item">
              <span class="my-info-label">활동 기간</span>
              <span class="my-info-value" id="my-info-activedays">-</span>
            </div>
          </div>
        </div>
        <!-- 소속 매니저 섹션 (일반 회원/딜러만 표시) -->
        <div class="my-info-manager-section" id="my-info-manager-section" style="display: none;">
          <div class="my-info-section-title">소속 매니저</div>
          <div class="manager-info">
            <span class="manager-info-icon">👤</span>
            <span class="manager-info-name" id="my-info-manager-name">-</span>
          </div>
        </div>
        <!-- 초대코드 입력 섹션 (소속 매니저 없는 회원만 표시) -->
        <div class="my-info-join-manager-section" id="my-info-join-manager-section" style="display: none;">
          <div class="my-info-section-title">매니저 연결</div>
          <div class="join-manager-form">
            <input type="text" id="my-info-join-code-input" class="join-code-input" placeholder="초대코드 6자리" maxlength="6">
            <button type="button" id="my-info-join-code-btn" class="join-code-btn">연결</button>
          </div>
          <div class="form-hint">매니저에게 받은 초대코드를 입력하면 해당 매니저의 매입 리스트를 볼 수 있습니다</div>
        </div>
        <div class="my-info-tests">
          <div class="my-info-tests-title">최근 테스트</div>
          <div class="my-info-tests-list" id="my-info-tests-list">
            <div class="my-info-no-tests">기록 없음</div>
          </div>
          <button class="my-info-stats-btn" id="my-info-stats-btn">
            테스트 통계 상세보기 →
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 초대코드 모달 (모든 회원) -->
  <div class="modal-overlay" id="invite-code-modal">
    <div class="modal-content invite-code-modal-content">
      <button class="modal-close" id="invite-code-modal-close">&times;</button>
      <h2 class="modal-title">내 초대코드</h2>
      <div class="invite-code-modal-body">
        <!-- 동적으로 생성됨 -->
      </div>
    </div>
  </div>

  <!-- 담당자 문의 모달 -->
  <div class="modal-overlay" id="contact-manager-modal">
    <div class="modal-content contact-manager-modal-content">
      <button class="modal-close" onclick="hideContactManagerModal()">&times;</button>
      <h2 class="modal-title">담당자 문의</h2>
      <div class="contact-manager-body">
        <div class="contact-manager-info">
          <div class="contact-manager-avatar">
            <img id="contact-manager-avatar" src="" alt="">
          </div>
          <div class="contact-manager-details">
            <span class="contact-manager-label">담당 업체</span>
            <span class="contact-manager-name" id="contact-manager-name">-</span>
          </div>
        </div>
        <div class="contact-manager-links">
          <a href="#" id="contact-notice-link" class="contact-link-btn" target="_blank" rel="noopener">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
              <path d="M13.73 21a2 2 0 01-3.46 0"/>
            </svg>
            공지방 입장
          </a>
          <a href="#" id="contact-direct-link" class="contact-link-btn primary" target="_blank" rel="noopener">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
            </svg>
            1:1 채팅방 입장
          </a>
        </div>
        <p class="contact-manager-notice" id="contact-no-links" style="display:none;">
          담당자가 아직 채팅방 링크를 설정하지 않았습니다.
        </p>
      </div>
    </div>
  </div>

  <!-- 시계 상세 모달 -->
  <div class="modal-overlay" id="watch-detail-modal">
    <div class="modal-content watch-detail-content">
      <button class="modal-close" id="watch-detail-close">&times;</button>
      <!-- 이미지 + 오버레이 정보 -->
      <div class="watch-detail-hero">
        <span class="watch-detail-badge" id="watch-detail-badge"></span>
        <img id="watch-detail-image" class="watch-detail-image" src="" alt="">
        <div class="watch-detail-overlay">
          <div class="watch-detail-overlay-info">
            <div class="watch-detail-title-line" id="watch-detail-title-line"></div>
            <div class="watch-detail-summary" id="watch-detail-summary"></div>
          </div>
        </div>
      </div>
      <!-- 동일 라인 다른 모델 -->
      <div class="related-models-section" id="related-models-section" style="display: none;">
        <h3 class="related-models-title" id="related-models-title"></h3>
        <div class="related-models-list" id="related-models-list"></div>
      </div>
      <!-- 상세 스펙 -->
      <div class="watch-detail-specs-section">
        <div class="watch-detail-price" id="watch-detail-price"></div>
        <button class="specs-toggle-btn" id="specs-toggle-btn" onclick="toggleWatchSpecs()">
          상세 정보 보기
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M6 9l6 6 6-6"/>
          </svg>
        </button>
        <div class="watch-detail-specs" id="watch-detail-specs">
          <div class="watch-detail-spec">
            <span class="spec-label">지름</span>
            <span class="spec-value" id="watch-detail-diameter"></span>
          </div>
          <div class="watch-detail-spec">
            <span class="spec-label">다이얼</span>
            <span class="spec-value" id="watch-detail-dial"></span>
          </div>
          <div class="watch-detail-spec">
            <span class="spec-label">베젤</span>
            <span class="spec-value" id="watch-detail-bezel"></span>
          </div>
          <div class="watch-detail-spec">
            <span class="spec-label">브레이슬릿</span>
            <span class="spec-value" id="watch-detail-bracelet"></span>
          </div>
          <div class="watch-detail-spec">
            <span class="spec-label">소재 상세</span>
            <span class="spec-value" id="watch-detail-material-detail"></span>
          </div>
          <div class="watch-detail-spec">
            <span class="spec-label">무브먼트</span>
            <span class="spec-value" id="watch-detail-movement"></span>
          </div>
          <div class="watch-detail-spec">
            <span class="spec-label">사이클롭스</span>
            <span class="spec-value" id="watch-detail-cyclops"></span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 승인 대기 화면 -->
  <div class="pending-approval-overlay" id="pending-approval" style="display:none;">
    <div class="pending-approval-content">
      <div class="pending-icon">⏳</div>
      <h2 class="pending-title">승인 대기 중</h2>
      <p class="pending-message">회원 가입 신청이 완료되었습니다.<br>관리자 승인 후 서비스를 이용하실 수 있습니다.</p>
      <button class="pending-logout-btn" id="logout-pending-btn">로그아웃</button>
    </div>
  </div>

  <!-- 모바일 필터 모달 -->
  <div class="filter-modal" id="filter-modal">
    <div class="filter-modal-content">
      <div class="filter-modal-header">
        <h3>필터</h3>
        <button class="filter-modal-close" id="filter-modal-close">&times;</button>
      </div>
      <div class="filter-modal-body">
        <!-- 라인 선택 (모바일 전용) -->
        <div class="filter-modal-section mobile-only-section" id="filter-line-section">
          <div class="filter-modal-section-title">라인</div>
          <div class="filter-line-grid" id="mobile-line-grid">
            <!-- JS에서 동적 생성 -->
          </div>
        </div>

        <!-- 상태 -->
        <div class="filter-modal-section">
          <div class="filter-modal-section-title">상태</div>
          <div class="filter-status-chips">
            <label class="filter-status-chip active" data-status="buy">
              <input type="checkbox" value="buy" checked style="display:none;">
              <span class="chip-dot buy"></span>
              매입
            </label>
            <label class="filter-status-chip active" data-status="pending">
              <input type="checkbox" value="pending" checked style="display:none;">
              <span class="chip-dot pending"></span>
              컨펌
            </label>
            <label class="filter-status-chip active" data-status="no">
              <input type="checkbox" value="no" checked style="display:none;">
              <span class="chip-dot no"></span>
              불가
            </label>
          </div>
        </div>

        <!-- 소재 -->
        <div class="filter-modal-section">
          <div class="filter-modal-section-title">소재</div>
          <select class="filter-modal-select" id="mobile-material-filter">
            <option value="">전체 소재</option>
          </select>
        </div>

        <!-- 베젤 -->
        <div class="filter-modal-section">
          <div class="filter-modal-section-title">베젤</div>
          <select class="filter-modal-select" id="mobile-bezel-filter">
            <option value="">전체 베젤</option>
          </select>
        </div>

        <!-- 브레이슬릿 -->
        <div class="filter-modal-section">
          <div class="filter-modal-section-title">브레이슬릿</div>
          <select class="filter-modal-select" id="mobile-bracelet-filter">
            <option value="">전체 브레이슬릿</option>
          </select>
        </div>

        <!-- 가격 -->
        <div class="filter-modal-section">
          <div class="filter-modal-section-title">가격 (만원)</div>
          <div class="price-range-inputs">
            <input type="number" class="price-input" id="mobile-price-min" placeholder="최소">
            <span class="price-range-separator">~</span>
            <input type="number" class="price-input" id="mobile-price-max" placeholder="최대">
          </div>
        </div>

        <!-- 정렬 -->
        <div class="filter-modal-section">
          <div class="filter-modal-section-title">정렬</div>
          <select class="filter-modal-select" id="mobile-sort-select">
            <option value="price-asc">가격 낮은순</option>
            <option value="price-desc">가격 높은순</option>
            <option value="name-asc">이름순</option>
          </select>
        </div>
      </div>
      <div class="filter-modal-footer">
        <button class="filter-reset-btn" id="mobile-reset-btn">초기화</button>
        <button class="filter-apply-btn" id="mobile-apply-btn">적용</button>
      </div>
    </div>
  </div>

  <!-- 계산기 결과 모달 -->
  <div class="modal-overlay" id="calc-result-modal">
    <div class="modal-content calc-result-modal-content">
      <button class="modal-close" id="calc-result-close">&times;</button>
      <h2 class="modal-title">계산 결과</h2>
      <div class="calc-result-items">
        <div class="calc-result-item">
          <span class="result-label">상품권 액면</span>
          <span class="result-value" id="result-gift-face">-</span>
        </div>
        <div class="calc-result-item">
          <span class="result-label">상품권 실구매가</span>
          <span class="result-value" id="result-gift-real">-</span>
        </div>
        <div class="calc-result-item">
          <span class="result-label">현금거스름</span>
          <span class="result-value" id="result-change">-</span>
        </div>
        <div class="calc-result-item">
          <span class="result-label">실적</span>
          <span class="result-value" id="result-point">-</span>
        </div>
        <div class="calc-result-item">
          <span class="result-label">시계 판매가</span>
          <span class="result-value" id="result-sell">-</span>
        </div>
      </div>
      <div class="calc-result-total">
        <span class="total-label">이윤 합계</span>
        <span class="total-value" id="result-total">-</span>
      </div>
    </div>
  </div>

  <!-- 로그인 필요 화면 -->
  <div class="login-required-overlay" id="login-required" style="display:none;">
    <div class="login-required-content">
      <div class="login-required-icon">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
        </svg>
      </div>
      <h2 class="login-required-title">로그인이 필요합니다</h2>
      <p class="login-required-message">서비스를 이용하시려면 로그인 또는 회원가입을 진행해주세요.</p>
      <button class="login-required-btn" id="login-required-btn">시작하기</button>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-inner">
      <div class="footer-top">
        <a href="index.html" class="footer-logo">
          <img src="favicon/favicon.png" alt="ROLEXFLIP" class="footer-logo-img">
          <span class="footer-logo-text">ROLEXFLIP</span>
        </a>
        <nav class="footer-nav">
          <a href="about.html" class="footer-nav-link">서비스소개</a>
          <span class="footer-nav-divider">|</span>
          <a href="notice.html" class="footer-nav-link">공지사항</a>
          <span class="footer-nav-divider">|</span>
          <a href="terms.html" class="footer-nav-link">이용약관</a>
          <span class="footer-nav-divider">|</span>
          <a href="privacy.html" class="footer-nav-link"><strong>개인정보취급방침</strong></a>
          <span class="footer-nav-divider">|</span>
          <a href="email-policy.html" class="footer-nav-link">이메일 무단수집거부</a>
          <span class="footer-nav-divider">|</span>
          <a href="partnership.html" class="footer-nav-link">광고 및 제휴</a>
        </nav>
      </div>
      <div class="footer-bottom">
        <p class="footer-disclaimer">본 서비스는 Rolex SA 및 공식 리테일러와 무관한 비공식 정보 서비스입니다. ROLEX®는 Rolex SA의 등록상표입니다.</p>
        <p class="footer-copyright">Copyright © 2024~2026 ROLEXFLIP. All Rights Reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="firebase-config.js"></script>
  <script src="main.js?v=12"></script>
</body>
</html>
